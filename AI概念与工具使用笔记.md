# AI æ¦‚å¿µä¸å·¥å…·ä½¿ç”¨ç¬”è®°


## RAG

##### LLM æ˜¯æ¶Œç°æ€§æ™ºèƒ½

ç°åœ¨çš„ LLM å­˜åœ¨çš„é—®é¢˜ä¹‹ä¸€æ˜¯å¹»è§‰é—®é¢˜ ( hallucination )ã€‚å› ä¸º LLM å¸¦æ¥çš„å·¨å¤§è®¨è®ºé‡ï¼Œç›´æ¥è®© hallucination è¿™ä¸ªå°ä¼—è¯æ±‡æˆä¸º 2023 å¹´åº¦å‰‘æ¡¥è¯å…¸çš„å¹´åº¦çƒ­è¯ã€‚å›åˆ°å¹»è§‰é—®é¢˜æœ¬èº«ï¼šå› ä¸º <font color=red>LLM æœ¬èº«æ˜¯åŸºäºä»å¤§é‡æ•°æ®ä¸­è®­ç»ƒå‡ºæ¥çš„æ¦‚ç‡æ¨¡å‹æ¥ä¸€ä¸ªä¸ªç”Ÿæˆ token</font>ï¼Œä¹Ÿå°±æ˜¯<font color=red>å®ƒå¹¶æ²¡æœ‰é€»è¾‘å’Œäº‹å®åŸºçº¿</font>ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯´ <font color=fuchsia>LLM çš„æ™ºèƒ½æ˜¯**æ¶Œç°æ€§çš„æ™ºèƒ½**ï¼Œæ˜¯ **åŸºäºæ¦‚ç‡äº§ç”Ÿ** çš„ â€œä¼ªæ™ºèƒ½â€ï¼Œä¸æ˜¯åº•å±‚åŸºäºé€»è¾‘å’Œæ¨ç†èƒ½åŠ› â€œçœŸæ™ºèƒ½â€</font> ã€‚ä½†è¿™å¯¹åº”ç”¨å±‚æ— æ‰€è°“ï¼Œå› ä¸ºè¿™ä¸ªæ¶Œç°æ€§çš„æ™ºèƒ½å·²ç»è¶³å¤Ÿå¼ºå¤§ï¼Œåœ¨åº”ç”¨å±‚å·²ç»è¡¨ç°å‡ºäº†è¶³å¤Ÿä½¿ç”¨çš„é€»è¾‘å’Œæ¨ç†èƒ½åŠ›ã€‚

#### RAG çš„åŸç†

RAG çš„åŸºæœ¬æµç¨‹

1. ç”¨æˆ·è¾“å…¥æé—®
2. æ£€ç´¢ï¼š<font color=red>æ ¹æ®ç”¨æˆ·æé—®å¯¹ **å‘é‡æ•°æ®åº“** è¿›è¡Œç›¸ä¼¼æ€§æ£€æµ‹ï¼ŒæŸ¥æ‰¾ä¸å›ç­”ç”¨æˆ·é—®é¢˜æœ€ç›¸å…³çš„å†…å®¹</font>
3. å¢å¼ºï¼šæ ¹æ®æ£€ç´¢çš„ç»“æœï¼Œç”Ÿæˆ prompt ã€‚ä¸€èˆ¬éƒ½ä¼šæ¶‰åŠ â€œä»…ä¾èµ–ä¸‹è¿°ä¿¡æ¯æºæ¥å›ç­”é—®é¢˜â€ è¿™ç§é™åˆ¶ LLM å‚è€ƒä¿¡æ¯æºçš„è¯­å¥ï¼Œæ¥å‡å°‘å¹»æƒ³ï¼Œè®©å›ç­”æ›´åŠ èšç„¦
4. ç”Ÿæˆï¼šå°†å¢å¼ºåçš„ prompt ä¼ é€’ç»™ LLM ï¼Œè¿”å›æ•°æ®ç»™ç”¨æˆ·

RAG æ˜¯å“ªé‡Œæœ‰é—®é¢˜è§£å†³å“ªé‡Œï¼Œæ—¢ç„¶å¤§æ¨¡å‹æ— æ³•è·å¾—æœ€æ–°å’Œå†…éƒ¨çš„æ•°æ®é›†ï¼Œé‚£æˆ‘ä»¬å°±ä½¿ç”¨å¤–æŒ‚çš„å‘é‡æ•°æ®åº“ä¸º llm æä¾›æœ€æ–°å’Œå†…éƒ¨çš„æ•°æ®åº“ã€‚æ—¢ç„¶å¤§æ¨¡å‹æœ‰å¹»æƒ³é—®é¢˜ï¼Œæˆ‘ä»¬å°±å°†å›ç­”é—®é¢˜æ‰€éœ€è¦çš„ä¿¡æ¯å’ŒçŸ¥è¯†ç¼–ç åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œå¼ºåˆ¶å¤§æ¨¡å‹åªå‚è€ƒè¿™äº›å†…å®¹è¿›è¡Œå›ç­”ã€‚

RAG æ›´åº•å±‚çš„é€»è¾‘ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å¯¹å¾… llm æ­£ç¡®çš„æ€åº¦ï¼š<font color=red>LLM æ˜¯**é€»è¾‘æ¨ç†å¼•æ“**ï¼Œè€Œä¸æ˜¯ä¿¡æ¯å¼•æ“</font>ã€‚æ‰€ä»¥ï¼Œç”±å¤–æŒ‚çš„å‘é‡æ•°æ®åº“æä¾›æœ€æœ‰æ•ˆçš„çŸ¥è¯†ï¼Œç„¶åç”± llm æ ¹æ®çŸ¥è¯†è¿›è¡Œæ¨ç†ï¼Œæä¾›æœ‰ä»·å€¼çš„å›å¤ã€‚

#### RAG çš„æµç¨‹

åœ¨ç†è§£äº† RAG çš„åŸºæœ¬åŸç†åï¼Œæˆ‘ä»¬å¿«é€Ÿå’Œå®è§‚çš„ä»‹ç»å¦‚ä½•æ‰“é€ ä¸€ä¸ª RAG chat bot çš„å…¨æµç¨‹ã€‚

1. **åŠ è½½æ•°æ®**

   å› ä¸ºæƒ³è¦æ ¹æ®ç”¨æˆ·çš„æé—®è¿›è¡Œè¯­æ„æ£€ç´¢ï¼Œæˆ‘ä»¬<font color=red>éœ€è¦å°†æ•°æ®é›†æ”¾åˆ°å‘é‡æ•°æ®åº“ä¸­</font>ï¼Œæ‰€ä»¥<font color=lightSeaGreen>éœ€è¦å°†ä¸åŒçš„æ•°æ®æºåŠ è½½è¿›æ¥</font>ã€‚è¿™é‡Œæ¶‰åŠåˆ°å¤šç§æ•°æ®æºï¼Œä¾‹å¦‚ pdfã€codeã€ç°å­˜æ•°æ®åº“ã€äº‘æ•°æ®åº“ç­‰ç­‰ã€‚

2. **åˆ‡åˆ†æ•°æ®**

   GPT-3.5 Turbo çš„ä¸Šä¸‹æ–‡çª—å£æ˜¯ 16k ï¼ŒGPT-4 Turbo ä¸Šä¸‹æ–‡çª—å£æ˜¯ 128k ï¼Œè€Œ<font color=lightSeaGreen>å¾ˆå¤šæ•°æ®æºéƒ½å¾ˆå®¹æ˜“æ¯”è¿™ä¸ªå¤§</font>ã€‚æ›´ä½•å†µï¼Œ<font color=lightSeaGreen>ç”¨æˆ·çš„æé—®ç»å¸¸æ¶‰åŠå¤šä¸ªæ•°æ®æº</font>ï¼Œæ‰€ä»¥<font color=red>éœ€è¦å¯¹æ•°æ®é›†è¿›è¡Œè¯­æ„åŒ–çš„åˆ‡åˆ†</font>ï¼Œæ ¹æ®å†…å®¹çš„ç‰¹ç‚¹å’Œç›®æ ‡å¤§æ¨¡å‹çš„ç‰¹ç‚¹ã€ä¸Šä¸‹æ–‡çª—å£ç­‰ï¼Œå¯¹æ•°æ®æºè¿›è¡Œåˆé€‚çš„åˆ‡åˆ†ã€‚

   > ğŸ‘€ è¿™é‡Œå•ä½ â€œkâ€ è¡¨ç¤º â€œåƒâ€

   è¿™é‡Œå¬èµ·æ¥æ¯”è¾ƒå®¹æ˜“ï¼Œä½†<font color=lightSeaGreen>è€ƒè™‘åˆ°æ•°æ®æºçš„å¤šç§å¤šæ ·å’Œè‡ªç„¶è¯­è¨€çš„ç‰¹ç‚¹</font>ï¼Œ<font color=red>åˆ‡åˆ†å‡½æ•°çš„é€‰æ‹©å’Œå‚æ•°çš„è®¾å®šæ˜¯éå¸¸éš¾ä»¥æ§åˆ¶çš„</font>ã€‚ç†è®ºä¸Šå¸Œæœ›æ¯ä¸ªæ–‡æ¡£å—éƒ½æ˜¯è¯­æ„ç›¸å…³ï¼Œå¹¶ä¸”ç›¸äº’ç‹¬ç«‹çš„ã€‚

3. **åµŒå…¥ ( embedding )**

   è¿™éƒ¨åˆ†å¯¹æ²¡æœ‰æœºå™¨å­¦ä¹ ç›¸å…³èƒŒæ™¯çš„åŒå­¦ä¸å®¹æ˜“ç†è§£ã€‚è¿™é‡Œ<font color=dodgerBlue>ç”¨æœ€ç®€å•çš„Â **è¯è¢‹ ( words bag ) æ¨¡å‹** æ¥æè¿°ä¸€ä¸‹æœ€ç®€å•çš„ embedding è¿‡ç¨‹</font>ï¼Œè®©å¤§å®¶æ›´å…·è±¡åŒ–çš„ç†è§£è¿™ä¸ªã€‚

   a. è¯è¢‹æ¨¡å‹å°±æ˜¯æœ€ç®€åŒ–çš„æƒ…å†µï¼šæŠŠä¸€ç¯‡ å¥å­/æ–‡ç«  ä¸­çš„å•è¯æå‰å‡ºæ¥ï¼Œå°±åƒæ”¾åˆ°ä¸€ä¸ªè¢‹å­é‡Œä¸€æ ·ï¼Œè®¤ä¸ºå•è¯ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œå¹¶ä¸å…³å¿ƒè¯ä¸è¯ä¹‹é—´çš„ä¸Šä¸‹æ–‡å…³ç³»ã€‚

   b. å‡è®¾æœ‰åç¯‡è‹±è¯­æ–‡ç« ï¼Œ<font color=red>å¯ä»¥æŠŠæ¯ä¸ªæ–‡ç« æ‹†åˆ†æˆå•è¯ï¼Œå¹¶ä¸”è¿˜åŸæˆæœ€åˆçš„çŠ¶æ€</font>ï¼ˆä¾‹å¦‚ didã€does => doï¼‰ï¼Œç„¶å<font color=red>ç»Ÿè®¡æ¯ä¸ªè¯å‡ºç°çš„æ¬¡æ•°</font>ã€‚ ç®€åŒ–ä¸€ä¸‹å‡è®¾æœ€åç»“æœå°±æ˜¯

   ```
   ç¬¬ä¸€ç¯‡æ–‡ç« : 
   apple: 10, phone:12
   
   ç¬¬äºŒç¯‡æ–‡ç« :
   apple: 8, android: 10, phone: 18
   
   ç¬¬ä¸‰ç¯‡æ–‡ç« :
   banana: 6, juice: 10
   ```

   c. å°è¯•æ„å»ºä¸€ä¸ªå‘é‡ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªä½ç½®æœ‰ä¸€ä¸ªå€¼ï¼Œä»£è¡¨æ¯ä¸ªå•è¯åœ¨è¿™ä¸ªæ–‡ç« ä¸­å‡ºç°çš„æ¬¡æ•°

   ```
   å˜é‡
   [apple, banana, phone, android, juice]
   ```

   é‚£æ¯ç¯‡æ–‡ç« ï¼Œéƒ½èƒ½ç”¨ä¸€ä¸ªå˜é‡æ¥è¡¨ç¤º

   ```
   ç¬¬ä¸€ç¯‡æ–‡ç« : [10, 0, 12, 0, 0]
   ç¬¬äºŒç¯‡æ–‡ç« : [8, 0, 18, 10, 0]
   ç¬¬ä¸‰ç¯‡æ–‡ç« : [0, 6, 0, 0, 10]
   ```

   d. <font color=red>è¿™æ ·æˆ‘ä»¬å°±èƒ½æŠŠä¸€ç¯‡æ–‡ç« ç”¨ä¸€ä¸ªå‘é‡æ¥è¡¨ç¤ºäº†</font>ï¼Œç„¶åå¯ä»¥ç”¨æœ€ç®€å•çš„ä½™å¼¦å®šç†å»è®¡ç®—ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„å¤¹è§’ï¼Œä»¥æ­¤ç¡®å®šä¸¤ä¸ªå‘é‡çš„è·ç¦»ã€‚

   > ğŸ’¡ è¿™é‡Œçš„ç®—æ³•æ˜¯ï¼š$\cos\theta=\frac{a \cdot b}{| a | \times | b |}$

   e. è¿™æ ·ï¼Œæˆ‘ä»¬å°±æœ‰äº†é€šè¿‡å‘é‡å’Œå‘é‡ä¹‹é—´çš„ä½™å¼¦å¤¹è§’çš„ï¼Œæ¥è¡¡é‡æ–‡ç« ä¹‹é—´ç›¸ä¼¼åº¦çš„èƒ½åŠ›ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ã€‚

   å½“ç„¶ï¼Œè¿™æ˜¯æœ€æœ€æœ€ç®€å•çš„ embedding åŸç†ï¼Œä¸è¿‡æ˜¯<font color=lightSeaGreen>æ‰€æœ‰çš„ embedding å’Œç›¸ä¼¼æ€§æœç´¢éƒ½æ˜¯ç±»ä¼¼çš„åŸç†</font>ã€‚

   å›åˆ° RAG æµç¨‹ä¸­ï¼Œæˆ‘ä»¬<font color=red>**å°†åˆ‡åˆ†åçš„æ¯ä¸€ä¸ªæ–‡æ¡£å—ä½¿ç”¨ embedding ç®—æ³•è½¬æ¢æˆä¸€ä¸ªå‘é‡ï¼Œå­˜å‚¨åˆ°å‘é‡æ•°æ®åº“ä¸­ ( vector store ) ä¸­**</font>ã€‚è¿™æ ·ï¼Œæ¯ä¸€ä¸ªåŸå§‹æ•°æ®éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„å‘é‡ï¼Œå¯ä»¥ç”¨æ¥æ£€ç´¢ã€‚

4. **æ£€ç´¢æ•°æ®**

   å½“æ‰€æœ‰éœ€è¦çš„æ•°æ®éƒ½å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“ä¸­åï¼Œæˆ‘ä»¬<font color=red>å°±å¯ä»¥æŠŠç”¨æˆ·çš„æé—®ä¹Ÿ embedding æˆå‘é‡ï¼Œç”¨è¿™ä¸ªå‘é‡å»å‘é‡æ•°æ®åº“ä¸­è¿›è¡Œæ£€ç´¢</font>ï¼Œ<font color=lightSeaGreen>æ‰¾åˆ°ç›¸ä¼¼æ€§æœ€é«˜çš„å‡ ä¸ªæ–‡æ¡£å—ï¼Œè¿”å›</font>ã€‚

   åœ¨è¿™é‡Œï¼Œä½¿ç”¨ä»€ä¹ˆç®—æ³•å»è®¡ç®—å‘é‡ä¹‹é—´çš„è·ç¦»ä¹Ÿæ˜¯éœ€è¦é€‰æ‹©çš„ï¼Œè¿™ä¸ªæˆ‘ä»¬ä¼šåœ¨å¯¹åº”çš„ç« èŠ‚è¿›è¡Œä»‹ç»ã€‚

5. **å¢å¼º prompt**

   åœ¨æœ‰äº†è·Ÿç”¨æˆ·æé—®æœ€ç›¸å…³çš„æ–‡æ¡£å—åï¼Œæˆ‘ä»¬æ ¹æ®æ–‡æ¡£å—å»æ„å»º prompt ã€‚ä¸€èˆ¬æ ¼å¼éƒ½ç±»ä¼¼äº

   ```
   ä½ æ˜¯ä¸€ä¸ª xxx çš„èŠå¤©æœºå™¨äººï¼Œä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®ç»™å®šçš„æ–‡æ¡£å›ç­”ç”¨æˆ·é—®é¢˜ï¼Œå¹¶ä¸”å›ç­”æ—¶ä»…æ ¹æ®ç»™å®šçš„æ–‡æ¡£ï¼Œå°½å¯èƒ½å›ç­”
   ç”¨æˆ·é—®é¢˜ã€‚å¦‚æœä½ ä¸çŸ¥é“ï¼Œä½ å¯ä»¥å›ç­”â€œæˆ‘ä¸çŸ¥é“â€ã€‚
   
   è¿™æ˜¯æ–‡æ¡£:
   {docs}
   
   ç”¨æˆ·çš„æé—®æ˜¯:
   {question}
   ```

6. **ç”Ÿæˆ**

   ç„¶åå°±æ˜¯å°†ç»„è£…å¥½çš„ prompt ä¼ é€’ç»™ chatbot è¿›è¡Œç”Ÿæˆå›ç­”ã€‚

å­¦ä¹ ä¸æ‘˜æŠ„è‡ªï¼š[ä»å‰ç«¯åˆ° AIï¼šLangChain.js å…¥é—¨å’Œå®æˆ˜ - 5. æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰åŸç†å’Œæµç¨‹](https://juejin.cn/book/7347579913702293567/section/7351410645298135091)



## é€šç”¨æ¦‚å¿µ



#### å¬å›ç‡

> ğŸ’¡ è¿™ä¸ªæ¦‚å¿µæ¶‰åŠåˆ° â€œæ··æ·†çŸ©é˜µâ€ ( confusion matrix ) æ¦‚å¿µ





## å·¥å…·ä½¿ç”¨

### MCP



#### æ¦‚å¿µ

å¯ä»¥çœ‹ä¸‹ [ç¼–è¯‘ | å¯¹è¯ MCP åˆ›å§‹äººï¼šMCP çš„èµ·æºã€æŒ‘æˆ˜ä¸æœªæ¥ - æ®µå°è‰çš„æ–‡ç«  - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/1892538540031705247) ï¼Œå…¶ä¸­è™½ç„¶æ„Ÿè§‰æ–‡ç« æœ‰äº›è¿‡é•¿ï¼Œæ²¡è€å¿ƒçœ‹å®Œï¼Œä¸è¿‡çœ‹çš„éƒ¨åˆ†è¿˜æ˜¯å¯ä»¥å‘ç°ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼š

- MCP å€Ÿé‰´è‡ª LSPã€‚

- é’ˆå¯¹ $M \times N$ çš„åœºæ™¯ï¼ˆä¸ªäººçš„ç†è§£æ˜¯ï¼šå­˜åœ¨å¤šä¸ªç³»ç»Ÿï¼ŒåŒæ—¶æ¯ä¸ªç³»ç»Ÿéƒ½æš´éœ²å‡ºå¤šä¸ªç‹¬ç«‹çš„æ¥å£ä¸å…¶ä»–ç³»ç»Ÿé€šè®¯ã€‚ä¹Ÿå¯ä»¥ç®€å•ç±»æ¯”ä¸ºæ•°æ®åº“è¡¨ä¸­ â€œå¤šå¯¹å¤šâ€ çš„å…³ç³»ï¼‰ï¼Œé€šè¿‡ä¸€ä¸ªåè®®è¿›è¡Œé€šè®¯æ˜¯å¾ˆå¥½çš„ç­–ç•¥

  > å¾ˆå¿«ä½ å°±å‘ç°ï¼Œ**è¿™æ˜¾ç„¶æ˜¯ä¸€ä¸ª $M \times N$ çš„é—®é¢˜**ã€‚ä½ æœ‰å¤šä¸ªåº”ç”¨å’Œå¤šä¸ªä½ æƒ³æ„å»ºçš„é›†æˆï¼Œç”¨åè®®æ¥è§£å†³è¿™ä¸ªé—®é¢˜å†åˆé€‚ä¸è¿‡äº†

- å’Œ LSP ä¸€æ ·ï¼Œä½¿ç”¨ JSON-RPC å®ç°é€šè®¯ï¼›ä¸è¿‡ï¼Œä½¿ç”¨æ–¹å¼å­˜åœ¨å·®å¼‚



### A2A / Agent2Agent

###### æ–‡æ¡£

https://google.github.io/A2A/

###### A2A æ˜¯ä»€ä¹ˆï¼Ÿ

Agent2Agent å¼€æ”¾åè®®ï¼Œæ”¯æŒä¸åŒå‚å•†æˆ–æ¡†æ¶å¼€å‘çš„æ™ºèƒ½ä½“å®‰å…¨é€šä¿¡ã€ä¿¡æ¯äº¤æ¢ä¸è¡ŒåŠ¨ååŒï¼Œè§£å†³å¤§è§„æ¨¡å¤šæ™ºèƒ½ä½“éƒ¨ç½²çš„æŒ‘æˆ˜ï¼Œèµ‹äºˆå¼€å‘è€…è·¨å¹³å°æ„å»ºäº’æ“ä½œæ™ºèƒ½ä½“çš„èƒ½åŠ›ã€‚

###### A2A å’Œ MCP æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ

è°·æ­Œè‡ªå·±è¯´ï¼ŒA2A å’Œ MCP æ˜¯äº’è¡¥çš„ï¼Œä¹Ÿç¡®å®å¦‚æ­¤ã€‚MCP è§£å†³äº†å¤§æ¨¡å‹å¦‚ä½•ä½¿ç”¨å·¥å…·çš„é—®é¢˜ï¼Œå±äºèµ‹äºˆå•ä¸ª Agent æ›´å¤šèƒ½åŠ›çš„é€šç”¨åè®®ï¼›A2A ç„å‡†çš„æ˜¯ä¸åŒå‚å•†ã€ä¸åŒå¼€å‘è€…ã€ä¸åŒæŠ€æœ¯æ ˆä¹‹é—´å¤šä¸ª Agent çš„é€šä¿¡å’Œåä½œé—®é¢˜ã€‚

æ¢å¥è¯è¯´ï¼Œ**MCP è®©å¼€å‘è€…æ›´å®¹æ˜“æ„å»ºå•ä¸ª Agentï¼ŒA2A è®©è¿™äº› Agent ä¹‹é—´å¯ä»¥åä½œäº¤äº’ã€‚**

æ‘˜è‡ªï¼š[è°·æ­Œå‘å¸ƒçš„ A2A åè®®æ˜¯ä»€ä¹ˆï¼Ÿä¼šç»™ Agent çš„å‘å±•å¸¦æ¥ä»€ä¹ˆå½±å“ï¼Ÿ - æ®µå°è‰çš„å›ç­” - çŸ¥ä¹](https://www.zhihu.com/question/1893443983843255220/answer/1893814587071111612)



#### ä¸€äº›æŠ€å·§

##### å¸¦æœ‰æƒé™åœ°ä½¿ç”¨ npx æ‰§è¡Œ

å½“ç”¨ npx æ‰§è¡Œä»»æ„ npm åŒ…æ—¶ï¼Œä½ å®é™…ä¸Šç»™äºˆäº†å®ƒåœ¨ä½ çš„ç”µè„‘ä¸Šæ‰§è¡Œä»»æ„ nodejs ä»£ç çš„æƒé™ï¼Œæ½œåœ¨é£é™©åŒ…æ‹¬ä½†ä¸é™äºè¯»å–æ–‡ä»¶ç³»ç»Ÿï¼ˆæ¯”å¦‚è¯»å–ç§é’¥ï¼‰ï¼›è¿™æ˜¯éå¸¸å±é™©çš„ã€‚

permissions æ˜¯ Node.js çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå½“ä¼ å…¥ `--permission` flag æ—¶ï¼ŒNode ä¼šé»˜è®¤ç¦ç”¨è¯»å†™æ–‡ä»¶ç³»ç»Ÿã€æ´¾ç”Ÿè¿›ç¨‹ç­‰æƒé™ï¼Œä½¿ç”¨è¿™äº›æƒé™éœ€è¦æ‰‹åŠ¨å£°æ˜ã€‚

æ‰€ä»¥ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š

```bash
npx --node-options="--permission --allow-fs-read=$(npm config get cache)" package-name
```

`--allow-fs-read` å£°æ˜äº†ä»…å¯ä»¥è®¿é—® npm cache ç›®å½•ï¼ˆå¦‚æœä¸åŠ è¿™ä¸ªçš„è¯ npx æœ¬èº«æ‰§è¡Œè„šæœ¬ä¼šæŠ¥é”™ï¼‰ï¼Œä½†åŒæ—¶æŠŠæƒé™é™å®šåœ¨äº†è¿™ä¸€ä¸ªç›®å½•ï¼Œé˜²æ­¢äº† npm åŒ…è¯»å–æ–‡ä»¶ç³»ç»Ÿä»»æ„æ–‡ä»¶çš„é£é™©

å­¦ä¹ è‡ªï¼š[twitter - @wong2_x çš„å¸–å­](https://x.com/wong2_x/status/1907331129809723862)


## Claude & Claude Code

##### èµ„æ–™

- [Claude Code å®˜æ–¹ä¸­æ–‡æ–‡æ¡£](https://code.claude.com/docs/zh-CN/)

#### AnyRouter æ•™ç¨‹

###### ä½¿ç”¨æ–¹æ³•

```sh
# å¯åŠ¨äº¤äº’æ¨¡å¼
claude

# ä»¥åˆå§‹æŸ¥è¯¢å¯åŠ¨
claude "è§£é‡Šè¿™ä¸ªé¡¹ç›®"

# è¿è¡Œå•ä¸ªå‘½ä»¤å¹¶é€€å‡º
claude -p "è¿™ä¸ªå‡½æ•°åšä»€ä¹ˆï¼Ÿ"

# å¤„ç†ç®¡é“å†…å®¹
cat logs.txt | claude -p "åˆ†æè¿™äº›é”™è¯¯"
```

###### æ¢å¤å¯¹è¯

```sh
# ç«‹å³æ¢å¤æœ€è¿‘çš„å¯¹è¯
claude --continue

# é€‰æ‹©ç‰¹å®šå¯¹è¯
claude --resume
```

###### å›¾åƒå¤„ç†

Claude Code å¯ä»¥å¤„ç†å›¾åƒä¿¡æ¯ï¼Œæ”¯æŒå¤šç§è¾“å…¥æ–¹å¼ï¼š

- å°†å›¾åƒæ‹–æ”¾åˆ° Claude Code çª—å£ä¸­
- å¤åˆ¶å›¾åƒå¹¶ä½¿ç”¨ cmd+v ç²˜è´´åˆ° CLI ä¸­
- æä¾›å›¾åƒè·¯å¾„

###### è®°å¿†ç³»ç»Ÿ

Claude Code é€šè¿‡Â `CLAUDE.md`Â æ–‡ä»¶å­˜å‚¨é‡è¦çš„é¡¹ç›®ä¿¡æ¯ã€çº¦å®šå’Œå¸¸ç”¨å‘½ä»¤ã€‚

```sh
# åˆå§‹åŒ–è®°å¿†æ–‡ä»¶
/init

# å¿«é€Ÿæ·»åŠ è®°å¿†
# å§‹ç»ˆä½¿ç”¨æè¿°æ€§å˜é‡å
```

###### å‹ç¼©ä¸Šä¸‹æ–‡

ä½¿ç”¨å‹ç¼©åŠŸèƒ½èŠ‚çœå¼€é”€ï¼š

```sh
/compact [instructions]
```

###### Git é›†æˆ

Claude Code æ”¯æŒä½¿ç”¨è‡ªç„¶è¯­è¨€æ“ä½œ Gitï¼š

```sh
> æäº¤æˆ‘çš„æ›´æ”¹
> åˆ›å»ºä¸€ä¸ª pr
> å“ªä¸ªæäº¤åœ¨å»å¹´åäºŒæœˆæ·»åŠ äº† markdown æµ‹è¯•ï¼Ÿ
> åœ¨ main åˆ†æ”¯ä¸Šå˜åŸºå¹¶è§£å†³ä»»ä½•åˆå¹¶å†²çª
```


### å®˜æ–¹æ–‡æ¡£ç¬”è®°

#### æ–œæ å‘½ä»¤

åœ¨äº¤äº’å¼ä¼šè¯ä¸­ä½¿ç”¨æ–œæ å‘½ä»¤æ§åˆ¶ Claude çš„è¡Œä¸ºã€‚

##### å†…ç½®æ–œæ å‘½ä»¤

|å‘½ä»¤|ç”¨é€”|
|---|---|
|`/add-dir`|æ·»åŠ é¢å¤–çš„å·¥ä½œç›®å½•|
|`/agents`|ç®¡ç†ç”¨äºä¸“é—¨ä»»åŠ¡çš„è‡ªå®šä¹‰ AI å­ä»£ç†|
|`/bashes`|åˆ—å‡ºå’Œç®¡ç†åå°ä»»åŠ¡|
|`/bug`|æŠ¥å‘Šé”™è¯¯ï¼ˆå°†å¯¹è¯å‘é€ç»™ Anthropicï¼‰|
|`/clear`|æ¸…é™¤å¯¹è¯å†å²|
|`/compact [instructions]`|å‹ç¼©å¯¹è¯ï¼Œå¯é€‰æ‹©æ€§åœ°æä¾›ç„¦ç‚¹è¯´æ˜|
|`/config`|æ‰“å¼€è®¾ç½®ç•Œé¢ï¼ˆé…ç½®é€‰é¡¹å¡ï¼‰|
|`/context`|å°†å½“å‰ä¸Šä¸‹æ–‡ä½¿ç”¨æƒ…å†µå¯è§†åŒ–ä¸ºå½©è‰²ç½‘æ ¼|
|`/cost`|æ˜¾ç¤ºä»¤ç‰Œä½¿ç”¨ç»Ÿè®¡ã€‚æœ‰å…³è®¢é˜…ç‰¹å®šçš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[æˆæœ¬è·Ÿè¸ªæŒ‡å—](https://code.claude.com/docs/zh-CN/costs#using-the-cost-command)ã€‚|
|`/doctor`|æ£€æŸ¥æ‚¨çš„ Claude Code å®‰è£…çš„å¥åº·çŠ¶å†µ|
|`/exit`|é€€å‡º REPL|
|`/export [filename]`|å°†å½“å‰å¯¹è¯å¯¼å‡ºåˆ°æ–‡ä»¶æˆ–å‰ªè´´æ¿|
|`/help`|è·å–ä½¿ç”¨å¸®åŠ©|
|`/hooks`|ç®¡ç†å·¥å…·äº‹ä»¶çš„é’©å­é…ç½®|
|`/ide`|ç®¡ç† IDE é›†æˆå¹¶æ˜¾ç¤ºçŠ¶æ€|
|`/init`|ä½¿ç”¨Â `CLAUDE.md`Â æŒ‡å—åˆå§‹åŒ–é¡¹ç›®|
|`/install-github-app`|ä¸ºå­˜å‚¨åº“è®¾ç½® Claude GitHub Actions|
|`/login`|åˆ‡æ¢ Anthropic è´¦æˆ·|
|`/logout`|ä»æ‚¨çš„ Anthropic è´¦æˆ·ç™»å‡º|
|`/mcp`|ç®¡ç† MCP æœåŠ¡å™¨è¿æ¥å’Œ OAuth èº«ä»½éªŒè¯|
|`/memory`|ç¼–è¾‘Â `CLAUDE.md`Â å†…å­˜æ–‡ä»¶|
|`/model`|é€‰æ‹©æˆ–æ›´æ”¹ AI æ¨¡å‹|
|`/output-style [style]`|ç›´æ¥è®¾ç½®è¾“å‡ºæ ·å¼æˆ–ä»é€‰æ‹©èœå•ä¸­é€‰æ‹©|
|`/permissions`|æŸ¥çœ‹æˆ–æ›´æ–°[æƒé™](https://code.claude.com/docs/zh-CN/iam#configuring-permissions)|
|`/plan`|ç›´æ¥ä»æç¤ºè¿›å…¥è®¡åˆ’æ¨¡å¼|
|`/plugin`|ç®¡ç† Claude Code æ’ä»¶|
|`/pr-comments`|æŸ¥çœ‹æ‹‰å–è¯·æ±‚æ³¨é‡Š|
|`/privacy-settings`|æŸ¥çœ‹å’Œæ›´æ–°æ‚¨çš„éšç§è®¾ç½®|
|`/release-notes`|æŸ¥çœ‹å‘å¸ƒè¯´æ˜|
|`/rename <name>`|é‡å‘½åå½“å‰ä¼šè¯ä»¥ä¾¿äºè¯†åˆ«|
|`/remote-env`|é…ç½®è¿œç¨‹ä¼šè¯ç¯å¢ƒï¼ˆclaude.ai è®¢é˜…è€…ï¼‰|
|`/resume [session]`|æŒ‰ ID æˆ–åç§°æ¢å¤å¯¹è¯ï¼Œæˆ–æ‰“å¼€ä¼šè¯é€‰æ‹©å™¨|
|`/review`|è¯·æ±‚ä»£ç å®¡æŸ¥|
|`/rewind`|å›é€€å¯¹è¯å’Œ/æˆ–ä»£ç |
|`/sandbox`|å¯ç”¨æ²™ç®±åŒ– bash å·¥å…·ï¼Œå…·æœ‰æ–‡ä»¶ç³»ç»Ÿå’Œç½‘ç»œéš”ç¦»ï¼Œç”¨äºæ›´å®‰å…¨ã€æ›´è‡ªä¸»çš„æ‰§è¡Œ|
|`/security-review`|å¯¹å½“å‰åˆ†æ”¯ä¸Šçš„å¾…å¤„ç†æ›´æ”¹å®Œæˆå®‰å…¨å®¡æŸ¥|
|`/stats`|å¯è§†åŒ–æ¯æ—¥ä½¿ç”¨æƒ…å†µã€ä¼šè¯å†å²ã€è¿èƒœè®°å½•å’Œæ¨¡å‹åå¥½|
|`/status`|æ‰“å¼€è®¾ç½®ç•Œé¢ï¼ˆçŠ¶æ€é€‰é¡¹å¡ï¼‰ï¼Œæ˜¾ç¤ºç‰ˆæœ¬ã€æ¨¡å‹ã€è´¦æˆ·å’Œè¿æ¥æ€§|
|`/statusline`|è®¾ç½® Claude Code çš„çŠ¶æ€è¡Œ UI|
|`/teleport`|æŒ‰ä¼šè¯ ID ä» claude.ai æ¢å¤è¿œç¨‹ä¼šè¯ï¼Œæˆ–æ‰“å¼€é€‰æ‹©å™¨ï¼ˆclaude.ai è®¢é˜…è€…ï¼‰|
|`/terminal-setup`|ä¸ºæ¢è¡Œå®‰è£… Shift+Enter é”®ç»‘å®šï¼ˆVS Codeã€Alacrittyã€Zedã€Warpï¼‰|
|`/theme`|æ›´æ”¹é¢œè‰²ä¸»é¢˜|
|`/todos`|åˆ—å‡ºå½“å‰ TODO é¡¹ç›®|
|`/usage`|ä»…é€‚ç”¨äºè®¢é˜…è®¡åˆ’ï¼šæ˜¾ç¤ºè®¡åˆ’ä½¿ç”¨é™åˆ¶å’Œé€Ÿç‡é™åˆ¶çŠ¶æ€|
|`/vim`|è¿›å…¥ vim æ¨¡å¼ä»¥åœ¨æ’å…¥å’Œå‘½ä»¤æ¨¡å¼ä¹‹é—´äº¤æ›¿|

##### è‡ªå®šä¹‰æ–œæ å‘½ä»¤

è‡ªå®šä¹‰æ–œæ å‘½ä»¤å…è®¸æ‚¨å°†ç»å¸¸ä½¿ç”¨çš„æç¤ºå®šä¹‰ä¸º Markdown æ–‡ä»¶ï¼ŒClaude Code å¯ä»¥æ‰§è¡Œè¿™äº›æ–‡ä»¶ã€‚å‘½ä»¤æŒ‰èŒƒå›´ï¼ˆç‰¹å®šäºé¡¹ç›®æˆ–ä¸ªäººï¼‰ç»„ç»‡ï¼Œå¹¶é€šè¿‡ç›®å½•ç»“æ„æ”¯æŒå‘½åç©ºé—´ã€‚

> [!TIP]
> æ–œæ å‘½ä»¤è‡ªåŠ¨å®Œæˆåœ¨æ‚¨çš„è¾“å…¥ä¸­çš„ä»»ä½•ä½ç½®éƒ½æœ‰æ•ˆï¼Œè€Œä¸ä»…ä»…åœ¨å¼€å¤´ã€‚åœ¨ä»»ä½•ä½ç½®é”®å…¥Â `/`Â ä»¥æŸ¥çœ‹å¯ç”¨å‘½ä»¤ã€‚

###### è¯­æ³•

```sh
/<command-name> [arguments]
```

###### å‚æ•°

|å‚æ•°|æè¿°|
|---|---|
|`<command-name>`|ä» Markdown æ–‡ä»¶åæ´¾ç”Ÿçš„åç§°ï¼ˆä¸åŒ…æ‹¬Â `.md`Â æ‰©å±•åï¼‰|
|`[arguments]`|ä¼ é€’ç»™å‘½ä»¤çš„å¯é€‰å‚æ•°|


## Prompt

##### ä¸€äº›èµ„æ–™

- [è®©AIèªæ˜45%çš„å¿ƒç†å­¦PromptæŠ€å·§](https://mp.weixin.qq.com/s/rA1EzPK5Gk0yNNBUXNAlRg)
- [RIPER-5](https://github.com/NeekChaw/RIPER-5)

#### amp prompt æŒ‡å—

Â For the best results, follow these guidelines:

- <font color=red>**Be explicit with what you want**</font>. Instead of â€œcan you do X?â€, try â€œdo X.â€
- Keep it short, keep it focused. Break very large tasks up into smaller sub-tasks, one per thread.Â <font color=red>Do not ask the agent to write database migrations in the same thread as it previously changed CSS for a documentation page</font>.
- Donâ€™t try to make the model guess. If you know something about how to achieve what you want the agent to do â€” which files to look at, which commands to run â€” put it in your prompt.
- <font color=dodgerBlue>If you want the model to not write any code</font>, but only to research and plan, say so: â€œOnly plan how to implement this. Do NOT write any code.â€
- UseÂ [`AGENTS.md`Â files](https://ampcode.com/manual#AGENTS.md)Â to guide Amp on how to run your tests and build steps and to avoid common mistakes.
- <font color=red>Abandon threads if they accumulated too much noise</font>. Sometimes things go wrong and failed attempts with error messages clutter up the context window. In those cases, itâ€™s often best to start with a new thread and a clean context window.
- Tell the agent how to best review its work: what command or test to run, what URL to open, which logs to read. Feedback helps agents as much as it helps us.

<font color=red>**The first prompt in the thread carries a lot of weight**</font>. It sets the direction for the rest of the conversation. We encourage you to be deliberate with it. Thatâ€™s why we useÂ Cmd/Ctrl+EnterÂ to submit a message in Amp â€” itâ€™s a reminder to put effort into a prompt.

<font color=dodgerBlue>Here are some examples of prompts weâ€™ve used with Amp:</font>

- â€œMakeÂ `observeThreadGuidanceFiles`Â returnÂ `Omit<ResolvedGuidanceFile, 'content'>[]`Â and remove that field from its return value, and update the tests. Note that it is omitted because this is used in places that do not need the file contents, and this saves on data transferred over the view API.â€ ([See Thread](https://ampcode.com/threads/T-9219191b-346b-418a-b521-7dc54fcf7f56))
- â€œRunÂ `<build command>`Â and fix all the errorsâ€
- â€œLook atÂ `<local development server url>`Â to see this UI component. Then change it so that it looks more minimal. Frequently check your work by screenshotting the URLâ€
- â€œRun git blame on the file I have open and figure out who added that new titleâ€
- â€œConvert these 5 files to use Tailwind,Â <font color=red>use one subagent per file</font>â€
- â€œTake a look atÂ `git diff`Â â€” someone helped me build a debug tool to edit a Thread directly in JSON. Please analyze the code and see how it works and how it can be improved. [â€¦]â€ ([See Thread](https://ampcode.com/threads/T-39dc399d-08cc-4b10-ab17-e6bac8badea7))
- â€œCheckÂ `git diff --staged`Â and remove the debug statements someone addedâ€ ([See Thread](https://ampcode.com/threads/T-66beb0de-7f02-4241-a25e-50c0dc811788))
- â€œFind the commit that added this using git log, look at the whole commit, then help me change this featureâ€
- â€œ<font color=red>Explain the relationship between class AutoScroller and ViewUpdater using a diagram</font>â€
- â€œRunÂ `psql`Â and rewire all theÂ `threads`Â in the databaser to my user (email starts with thorsten)â€ ([See Thread](https://ampcode.com/threads/T-f810ef79-ba0e-4338-87c6-dbbb9085400a))

æ‘˜è‡ªï¼š[amp - manual # How to Prompt](https://ampcode.com/manual#how-to-prompt)